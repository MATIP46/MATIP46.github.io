<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Terminal</title>
<style>
    html, body {
        margin: 0;
        height: 100%;
        background: #0b0b0b;
        font-family: monospace;
        color: #00ff88;
        overflow: hidden;
    }

    #terminal {
        box-sizing: border-box;
        padding: 16px;
        height: 100%;
        width: 100%;
        overflow: hidden;
    }

    .line {
        display: flex;
        align-items: center;
        width: 100%;
    }

    .prompt {
        white-space: nowrap;
        margin-right: 4px;
    }

    .input {
        flex: 1;
        background: none;
        border: none;
        outline: none;
        color: #00ff88;
        font-family: monospace;
        font-size: 1em;
        caret-color: #00ff88;
    }

    .output {
        color: #dddddd;
        white-space: pre-wrap;
    }

    .error {
        color: #ff5555;
    }
</style>
</head>
<body>

<div id="terminal"></div>

<script>
const terminal = document.getElementById("terminal");

/* Block mouse/touch scrolling only (NOT keyboard typing) */
["wheel", "touchmove"].forEach(evt =>
    document.addEventListener(evt, e => e.preventDefault(), { passive: false })
);

/* Block scroll keys but allow SPACE for typing */
document.addEventListener("keydown", e => {
    if (["ArrowUp", "ArrowDown", "PageUp", "PageDown", "Home", "End"].includes(e.key)) {
        e.preventDefault();
    }
});

function scrollToBottom() {
    terminal.scrollTop = terminal.scrollHeight;
}

function createPrompt() {
    const line = document.createElement("div");
    line.className = "line";

    const prompt = document.createElement("span");
    prompt.className = "prompt";
    prompt.textContent = "user@homebrew::";

    const input = document.createElement("input");
    input.className = "input";
    input.autocomplete = "off";
    input.spellcheck = false;

    input.addEventListener("keydown", e => {
        if (e.key === "Enter") {
            input.disabled = true;
            runCommand(input.value);
        }
    });

    line.appendChild(prompt);
    line.appendChild(input);
    terminal.appendChild(line);

    input.focus();
    scrollToBottom();
}

function printLine(text, className = "output") {
    const line = document.createElement("div");
    line.className = className;
    line.textContent = text;
    terminal.appendChild(line);
    scrollToBottom();
}

function runCommand(cmd) {
    const trimmed = cmd.trim();

    if (!trimmed) {
        createPrompt();
        return;
    }

    const parts = trimmed.split(" ");
    const command = parts[0];

    switch (command) {
        case "help":
            printLine("Available commands:");
            printLine("help");
            printLine("echo <text>");
            printLine("date");
            printLine("clear");
            break;

        case "echo":
            printLine(parts.slice(1).join(" "));
            break;

        case "date":
            printLine(new Date().toString());
            break;

        case "clear":
            terminal.innerHTML = "";
            break;

        default:
            printLine(`Error: command not found: ${trimmed}`, "error");
    }

    createPrompt();
}

/* Start terminal */
createPrompt();
</script>

</body>
</html>
